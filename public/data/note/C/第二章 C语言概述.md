# first.c程序
```
#include <stdio.h>
int main(void)                    /* 一个简单的C程序 */
{
     int num;                     /* 定义一个名为num的变量 */
     num = 1;                     /* 为num赋一个值 */

     printf("I am a simple ");    /* 使用printf()函数 */
     printf("computer.\n");
     printf("My favorite number is %d because it is first.\n",num);

     return 0;
}
```

程序的输出应该是：

```
I am a simple computer.
My favorite number is 1 because it is first.
```

让窗口等待用户按下一个键后才关闭，可在程序的return语句前添加一行代码：
```
getchar();
```

# 程序细节

## #include指令和头文件
```
#include<stdio.h>
```

这段代码的作用相当于把stdio.h文件中的所有内容都输入该行所在的位置。实际上，这是一种“拷贝-粘贴”的操作。include文件提供了一种方便的途径共享许多程序共有的信息。

这行代码是一条C预处理器指令（preprocessor directive）。通常，C编译器在编译前会对源代码做一些准备工作，即预处理（preprocessing）。

所有的C编译器软件包都提供stdio.h文件。该文件中包含了供编译器使用的输入和输出函数（如，printf()）信息。该文件名的含义是标准输入/输出头文件。通常，在C程序顶部的信息集合被称为头文件（header）。

在大多数情况下，头文件包含了编译器创建最终可执行程序要用到的信息。例如，头文件中可以定义一些常量，或者指明函数名以及如何使用它们。但是，函数的实际代码在一个预编译代码的库文件中。简而言之，头文件帮助编译器把你的程序正确地组合在一起。

ANSI/ISO C规定了C编译器必须提供哪些头文件。有些程序要包含stdio.h，而有些不用。特定C实现的文档中应该包含对C库函数的说明。这些说明确定了使用哪些函数需要包含哪些头文件。例如，要使用printf()函数，必须包含stdio.h头文件。省略必要的头文件可能不会影响某一特定程序，但是最好不要这样做。本书每次用到库函数，都会用#include指令包含ANSI/ISO标准指定的头文件。

## main()函数

```
int main(void)
```

函数是C程序的基本模块。

int是main()函数的返回类型。这表明main()函数返回的值是整数。

通常，函数名后面的圆括号中包含一些传入函数的信息。该例中没有传递任何信息。


## 注释

```
/*一个简单的程序*/
```

在程序中，被/* */两个符号括起来的部分是程序的注释。写注释能让他人（包括自己）更容易明白你所写的程序。C语言注释的好处之一是，可将注释放在任意的地方，甚至是与要解释的内容在同一行。较长的注释可单独放一行或多行。在/*和*/之间的内容都会被编译器忽略。

下面列出了一些有效和无效的注释形式：

```
/* 这是一条C注释。 */
/* 这也是一条注释，
   被分成两行。*/
/*
   也可以这样写注释。
*/

/* 这条注释无效，因为缺少了结束标记。
```

C99新增了另一种风格的注释，普遍用于C++和Java。这种新风格使用//符号创建注释，仅限于单行。

```
// 这种注释只能写成一行。
int rigue; // 这种注释也可置于此。
```


## 花括号、函数体和块

```
{
    ...
}
```

花括号把main()函数括起来。一般而言，所有的C函数都使用花括号标记函数体的开始和结束。这是规定，不能省略。只有花括号（{}）能起这种作用，圆括号（()）和方括号（[]）都不行。

花括号还可用于把函数中的多条语句合并为一个单元或块。

## 声明

```
int num;
```

这行代码叫作声明（declaration）。声明是C语言最重要的特性之一。在该例中，声明完成了两件事。其一，在函数中有一个名为num的变量（variable）。其二，int表明num是一个整数（即，没有小数点或小数部分的数）。int是一种数据类型。编译器使用这些信息为num变量在内存中分配存储空间。分号在C语言中是大部分语句和声明的一部分

**int**是C语言的一个关键字（keyword），表示一种基本的C语言数据类型。关键字是语言定义的单词，不能做其他用途

**num**是一个标识符（identifier），也就是一个变量、函数或其他实体的名称。因此，声明把特定标识符与计算机内存中的特定位置联系起来，同时也确定了存储在某位置的信息类型或数据类型。

C语言中，所有变量都必须先声明才能使用。这意味着必须列出程序中用到的所有变量名及其类型。

### 数据类型

C语言可以处理多种类型的数据，如整数、字符和浮点数。把变量声明为整型或字符类型，计算机才能正确地存储、读取和解释数据。


### 命名

给变量命名时要使用有意义的变量名或标识符（如，程序中需要一个变量数羊，该变量名应该是sheep_count而不是x3）。如果变量名无法清楚地表达自身的用途，可在注释中进一步说明。

可以用小写字母、大写字母、数字和下划线（_）来命名。而且，名称的第1个字符必须是字母或下划线，不能是数字。

![[Pasted image 20240531153253.png]]

操作系统和C库经常使用以一个或两个下划线字符开始的标识符（如，_kcab），因此最好避免在自己的程序中使用这种名称。标准标签都以一个或两个下划线字符开始，如库标识符。这样的标识符都是保留的。这意味着，虽然使用它们没有语法错误，但是会导致名称冲突。

C语言的名称区分大小写，即把一个字母的大写和小写视为两个不同的字符。因此，stars和Stars、STARS都不同。
### 申明变量的理由

把所有的变量放在一处，方便读者查找和理解程序的用途。如果变量名都是有意义的（如，taxrate而不是r），这样做效果很好。如果变量名无法表述清楚，在注释中解释变量的含义。这种方法让程序的可读性更高。

声明变量会促使你在编写程序之前做一些计划。程序在开始时要获得哪些信息？希望程序如何输出？表示数据最好的方式是什么？

声明变量有助于发现隐藏在程序中的小错误，如变量名拼写错误。

如果事先未声明变量，C程序将无法通过编译。

C99之前的标准要求把声明都置于块的顶部，这样规定的好处是：把声明放在一起更容易理解程序的用途。C99允许在需要时才声明变量，这样做的好处是：在给变量赋值之前声明变量，就不会忘记给变量赋值。但是实际上，许多编译器都还不支持C99。

## 赋值

```
num = 1;
```

这行代码是赋值表达式语句。赋值是C语言的基本操作之一。该行代码的意思是“把值1赋给变量num”。在执行int num;声明时，编译器在计算机内存中为变量num预留了空间，然后在执行这行赋值表达式语句时，把值存储在之前预留的位置。可以给num赋不同的值，这就是num之所以被称为变量（variable）的原因。注意，该赋值表达式语句从右侧把值赋到左侧。另外，该语句以分号结尾。

## printf()函数

```
printf("I am a simple ");
printf("computer.\n");
printf("My favorite number is %d because it is first.\n", num);
```

使用了C语言的一个标准函数：printf()。圆括号表明printf是一个函数名。圆括号中的内容是从main()函数传递给printf()函数的信息。例如，上面的第1行把I am a simple传递给printf()函数。该信息被称为参数，或者更确切地说，是函数的实际参数（actual argument）

在C语言中，实际参数（简称实参）是传递给函数的特定值，形式参数（简称形参）是函数中用于存储值的变量。

第1行printf()演示了在C语言中如何调用函数。只需输入函数名，把所需的参数填入圆括号即可。当程序运行到这一行时，控制权被转给已命名的函数（该例中是printf()）。函数执行结束后，控制权被返回至主调函数（calling function），该例中是main()。

\n的意思是换行。\n组合（依次输入这两个字符）代表一个换行符（newline character）。对于printf()而言，它的意思是“在下一行的最左边开始新的一行”。也就是说，打印换行符的效果与在键盘按下Enter键相同。

换行符是一个转义序列（escape sequence）。转义序列用于代表难以表示或无法输入的字符。如，\\t代表Tab键，\\b代表Backspace键（退格键）。每个转义序列都以反斜杠字符（\\）开始。

参数中的%d被数字1代替了，而1就是变量num的值。%d相当于是一个占位符，其作用是指明输出num值的位置。

%提醒程序，要在该处打印一个变量，d表明把变量作为十进制整数打印。printf()函数名中的f提醒用户，这是一种格式化打印函数。printf()函数有多种打印变量的格式，包括小数和十六进制整数。

## return语句

int main(void)中的int表明main()函数应返回一个整数。C标准要求main()这样做。有返回值的C函数要有return语句。该语句以return关键字开始，后面是待返回的值，并以分号结尾。如果遗漏main()函数中的return语句，程序在运行至最外面的右花括号（}）时会返回0。因此，可以省略main()函数末尾的return语句。但是，不要在其他有返回值的函数中漏掉它。


# 简单程序的结构

**程序**由一个或多个函数组成，必须有main()函数。**函数**由函数头和函数体组成。**函数头**包括函数名、传入该函数的信息类型和函数的返回类型。通过函数名后的圆括号可识别出函数，圆括号里可能为空，可能有参数。**函数体**被花括号括起来，由一系列语句、声明组成，如图2.4所示。本章的程序示例中有一条声明，声明了程序使用的变量名和类型。然后是一条赋值表达式语句，变量被赋予一个值。接下来是1条printf()语句![](https://img30.360buyimg.com/ebookadmin/jfs/t1/105999/18/22490/1481/61ee3f2eE1038053c/5ae4f319f21f7a03.png)，调用printf()函数1次。最后，main()以return语句结束。

![[Pasted image 20240531154552.png]]

简而言之，一个简单的C程序的格式如下：
```
#include <stdio.h>
int main(void)
{
     语句
     return 0;
}
```

# 进一步使用C

## fathm_ft.c程序

```
// fathm_ft.c -- 把2英寻转换成英尺
#include <stdio.h>
int main(void)
{
     int feet, fathoms;

     fathoms = 2;
     feet = 6 * fathoms;
     printf("There are %d feet in %d fathoms!\n", feet, fathoms);
     printf("Yes, I said %d feet!\n", 6 * fathoms);

     return 0;
}
```

## 程序说明
### 多条声明
程序在一条声明中声明了两个变量，要在声明中用逗号隔开两个变量（feet和fathoms）

```
int feet, fathoms;
```
或
```
int feet;
int fathoms;
```

### 乘法

用\*表示乘法

```
feet = 6 * fathoms;
```

查找变量fathoms的值，用6乘以该值，并把计算结果赋给变量feet

### 打印多个值

输出应该是这样：

```
There are 12 feet in 2 fathoms!
Yes, I said 12 feet!
```

程序的第1个printf()中进行了两次替换。双引号后面的第1个变量（feet）替换了双引号中的第1个%d；双引号后面的第2个变量（fathoms）替换了双引号中的第2个%d。注意，待输出的变量列于双引号的后面。还要注意，变量之间要用逗号隔开。

第2个printf()函数说明待打印的值不一定是变量，只要可求值得出合适类型值的项即可，如6 * fathoms。

# 多个函数

## two_func.c程序

```
/* two_func.c -- 一个文件中包含两个函数 */
#include <stdio.h>
void butler(void); /* ANSI/ISO C函数原型 */
int main(void)
{
     printf("I will summon the butler function.\n");
     butler();
     printf("Yes. Bring me some tea and writeable DVDs.\n");

     return 0;
}
void butler(void) /* 函数定义开始 */
{
     printf("You rang, sir?\n");
}
```

该程序的输出如下：

```
I will summon the butler function.
You rang, sir?
Yes. Bring me some tea and writeable DVDs.
```

butler()函数在程序中出现了3次。第1次是函数原型（prototype），告知编译器在程序中要使用该函数；第2次以函数调用（function call）的形式出现在main()中；最后一次出现在函数定义（function definition）中，函数定义即是函数本身的源代码。

函数原型是一种声明形式，告知编译器正在使用某函数，因此函数原型也被称为函数声明（function declaration）。函数原型还指明了函数的属性。例如，butler()函数原型中的第1个void表明，butler()函数没有返回值（通常，被调函数会向主调函数返回一个值，但是butler()函数没有）。第2个void（butler(void)中的void）的意思是butler()函数不带参数。因此，当编译器运行至此，会检查butler()是否使用得当。注意，void在这里的意思是“空的”，而不是“无效”。

在main()中调用butler()很简单，写出函数名和圆括号即可。当butler()执行完毕后，程序会继续执行main()中的下一条语句。

程序的最后部分是butler()函数的定义，其形式和main()相同，都包含函数头和用花括号括起来的函数体。函数头重述了函数原型的信息：butler()不带任何参数，且没有返回值。

何时执行butler()函数取决于它在main()中被调用的位置，而不是butler()的定义在文件中的位置。例如，把butler()函数的定义放在main()定义之前，不会改变程序的执行顺序，butler()函数仍然在两次printf()调用之间被调用。记住，无论main()在程序文件中处于什么位置，所有的C程序都从main()开始执行。但是，C的惯例是把main()放在开头，因为它提供了程序的基本框架。

# 调试程序

程序的错误通常叫作bug，找出并修正错误的过程叫作调试（debug）。

## nogood.c程序

```
/* nogood.c -- 有错误的程序 */
#include <stdio.h>
int main(void)
(
     int n, int n2, int n3;

     /* 该程序有多处错误
     n = 5;
     n2 = n * n;
     n3 = n2 * n2;
     printf("n = %d, n squared = %d, n cubed = %d\n", n, n2, n3)

     return 0;
)
```


## 语法错误

其一，main()函数体使用圆括号来代替花括号。这就是把C符号用错了地方。其二，变量声明应该这样写：

```
int n, n2, n3;
// 或者
int n;
int n2;
int n3;
```

其三，main()中的注释末尾漏掉了*/（另一种修改方案是，用//替换/*）。最后，printf()语句末尾漏掉了分号。

## 语义错误

语义错误是指意思上的错误。

程序示例中有这样的错误：
```
n3 = n2 * n2;
```

此处，n3原意表示n的3次方，但是代码中的n3被设置成n的4次方（n2 = n * n）。

## stillbad.c程序

```
/* stillbad.c -- 修复了语法错误的程序 */
#include <stdio.h>
int main(void)
{
     int n, n2, n3;

     /* 该程序有一个语义错误 */
     n = 5;
     n2 = n * n;
     n3 = n2 * n2;
     printf("n = %d, n squared = %d, n cubed = %d\n", n, n2, n3);

     return 0;
}
```

该程序的输出如下：

```
n = 5, n squared = 25, n cubed = 625
```

![[Pasted image 20240601001821.png]]


## 程序状态

通过逐步跟踪程序的执行步骤，并记录每个变量，便可监视程序的状态。程序状态（program state）是在程序的执行过程中，某给定点上所有变量值的集合。它是计算机当前状态的一个快照。

定位语义错误的另一种方法是：在程序中的关键点插入额外的printf()语句，以监视指定变量值的变化。通过查看值的变化可以了解程序的执行情况。对程序的执行满意后，便可删除额外的printf()语句，然后重新编译。

检测程序状态的第3种方法是使用调试器。调试器（debugger）是一种程序，让你一步一步运行另一个程序，并检查该程序变量的值。调试器有不同的使用难度和复杂度。较高级的调试器会显示正在执行的源代码行号。这在检查有多条执行路径的程序时很方便，因为很容易知道正在执行哪条路径。

# 关键字和保留标识符

关键字是C语言的词汇。它们对C而言比较特殊，不能用它们作为标识符（如，变量名）。许多关键字用于指定不同的类型，如int。还有一些关键字（如，if）用于控制程序中语句的执行顺序。

粗体表示的是C90标准新增的关键字，斜体表示的C99标准新增的关键字，粗斜体表示的是C11标准新增的关键字：

![[Pasted image 20240601002045.png]]

# 总结

C程序由一个或多个C函数组成。每个C程序必须包含一个main()函数，这是C程序要调用的第1个函数。简单的函数由函数头和后面的一对花括号组成，花括号中是由声明、语句组成的函数体。

在C语言中，大部分语句都以分号结尾。声明语句为变量指定变量名，并标识该变量中存储的数据类型。变量名是一种标识符。赋值表达式语句把值赋给变量，或者更一般地说，把值赋给存储空间。函数表达式语句用于调用指定的已命名函数。调用函数执行完毕后，程序会返回到函数调用后面的语句继续执行。

printf()函数用于输出想要表达的内容和变量的值。

一门语言的语法是一套规则，用于管理语言中各有效语句组合在一起的方式。语句的语义是语句要表达的意思。编译器可以检测出语法错误，但是程序里的语义错误只有在编译完之后才能从程序的行为中表现出来。检查程序是否有语义错误要跟踪程序的状态，即检查程序每执行一步后所有变量的值。

最后，关键字是C语言的词汇。

# 复习题

**C语言的基本模块是什么？**
	它们都叫作函数。
	
**什么是语法错误？写出一个英语例子和C语言例子。**
	语法错误违反了组成语句或程序的规则。这是一个有语法错误的英文例子：Me speak English good．。这是一个有语法错误的C语言例子：printf"Where are the parentheses?";。
	
**什么是语义错误？写出一个英语例子和C语言例子。**
	语义错误是指含义错误。这是一个有语义错误的英文例子：This sentence is excellent Czech.。这是一个有语义错误的C语言例子： thrice_n = 3 + n;。

**Indiana Sloth编写了下面的程序，并征求你的意见。请帮助他评定。**
```
include studio.h
int main{void} /* 该程序打印一年有多少周 /*
(
     int s

     s := 56;
     printf(There are s weeks in a year.);
     return 0;
```
	第1行：以一个#开始；studio.h应改成stdio.h；然后用一对尖括号把stdio.h括起来。
	第2行：把{}改成()；注释末尾把/*改成*/。
	第3行：把(改成｛
	第4行：int s末尾加上一个分号。
	第5行没问题。
	第6行：把:=改成=，赋值用=，而不是用:=（这说明Indiana Sloth了解Pascal）。另外，用于赋值的值56也不对，一年有52周，不是56周。
	第7行应该是：printf("There are %d weeks in a year.\n", s);
	第9行：原程序中没有第9行，应该在该行加上一个右花括号｝。
	修改后的程序如下：
```
#include <stdio.h>
int main(void) /* this prints the number of weeks in a year */
{
     int s;

     s = 52;
     printf("There are %d weeks in a year.\n", s);
     return 0;
}
```

**假设下面的4个例子都是完整程序中的一部分，它们都输出什么结果？**

```
a. printf("Baa Baa Black Sheep.");
   printf("Have you any wool?\n");
b. printf("Begone!\nO creature of lard!\n");
c. printf("What?\nNo/nfish?\n");
d. int num;
   num = 2;
   printf("%d + %d = %d", num, num, num + num);
```

	a．Baa Baa Black Sheep.Have you any wool?（注意，Sheep.和Have之间没有空格）
	b．Begone!
	O creature of lard!
	c．What?
	No/nfish?
	（注意斜杠/和反斜杠\的效果不同，/只是一个普通的字符，原样打印）
	d．2 + 2 = 4
	（注意，每个%d与列表中的值相对应。还要注意，+的意思是加法，可以在printf()语句内部计算）
	
**在main、int、function、char、=中，哪些是C语言的关键字？**
	关键字是int和char（main是一个函数名；function是函数的意思；=是一个运算符）。


**如何以下面的格式输出变量words和lines的值（这里，3020和350代表两个变量的值）？**
```
There were 3020 words and 350 lines.
```
	printf("There were %d words and %d lines.\n", words, lines);

**考虑下面的程序，请问，在执行完第7、第8、第9行后，程序的状态分别是什么？**
```
#include <stdio.h>
int main(void)
{
      int a, b;

      a = 5;
      b = 2; /* 第7行 */
      b = a; /* 第8行 */
      a = b; /* 第9行 */
      printf("%d %d\n", b, a);
      return 0;
}
```
	执行完第7行后，a是5，b是2。执行完第8行后，a和b都是5。执行完第9行后，a和b仍然是5（注意，a不会是2，因为在执行a = b;时，b的值已经被改为5）。

**考虑下面的程序，请问，在执行完第7、第8、第9行后，程序的状态分别是什么？**
```
#include <stdio.h>
int main(void)
{
      int x, y;

      x = 10;
      y = 5;        /* 第7行 */
      y = x + y;    /*第8行*/
      x = x*y;      /*第9行*/
      printf("%d %d\n", x, y);
      return 0;
}
```
	执行完第7行后，x是10，b是5。执行完第8行后，x是10，y是15。执行完第9行后，x是150，y是15。








# 资料补充
[【远程开发#2】code-server配置C/C++_code-server c++插件-CSDN博客](https://blog.csdn.net/andlink/article/details/133527203)