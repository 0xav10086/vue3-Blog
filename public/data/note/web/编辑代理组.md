# 编辑代理组

在这里使用clash-verge来作为环境

Verge版本：v2.0.0

[Github项目地址](https://github.com/clash-verge-rev/clash-verge-rev)

Copilot和ChatGPT需要使用特定区域的网络环境才能访问，实在是坏！

## 步骤
1. 在‘订阅’中右键你的订阅文件
2. 选择‘编辑代理组’
3. 填写‘代理组组名’，在‘引入代理’中选择所有关于美国的节点，如‘美国01’、‘美国02’等
4. 其他的选项保持默认即可
5. 最后点击‘添加前置代理组’
6. 退回到‘订阅’，并再次右键你的订阅文件
7. 选择‘编辑规则’
8. 规则类型选择‘DOMAIN'，规则内容填写'chat.openai.com',代理策略选择你刚刚创建的代理组
9. 规则类型选择‘DOMAIN'，规则内容填写'chatgpt.com',代理策略选择你刚刚创建的代理组
10. 点击‘保存’，至此就结束了

## 相关代码

```yaml
prepend:
  - type: 'select'
    name: 'US Proxy Group'
    interval: 300
    timeout: 5000
    max-failed-times: 5
    lazy: true
    proxies:
      - '美国01'
      - '美国02'
      - '美国03'
      - '美国04'
      - '美国06'
      - '美国05'
      - '美国07'
      - '美国08'
```

```yaml
prepend:
  - 'DOMAIN-KEYWORD,copilot,US Proxy Group'
  - 'DOMAIN,chat.openai.com,US Proxy Group'
  - 'DOMAIN,chatgpt.com,US Proxy Group'
```

# 名词解释

~~知识学爆~~

~~艹，才发现鼠标移动到选项会有解释~~
## 编辑代理组

### 代理组类型-Group Type
select: 允许你手动选择一个代理服务器，适合需要精确控制代理的情况。

url-test: 对多个代理服务器进行测试，选择响应时间最快的那个来使用，适合追求速度的用户。

fallback: 按照顺序使用代理服务器，如果当前代理服务器失效，则自动切换到下一个。

load-balance: 将流量分散到多个代理服务器上，以达到负载均衡的效果。

relay: 一个代理连接到另一个代理，形成代理链，适合需要多重跳转的用户。
### 代理组组名-Group Name
代理组的名称，用于识别不同的代理组
### 代理组图标—Proxy Group Icon
用于代理组显示的图标，这是[相关图标](https://www.clashverge.dev/guide/group_icon/group_icon.html)的具体配置教程
### 引入代理-Use Proxies
将具体的代理服务器添加到这个代理组中
### 引入代理集合-Use Provider
将代理提供商中的所有代理添加到代理组中
### 健康检查测试地址-Health Check Url
用于检查代理健康状态的测试地址，就是测速的
### 期望状态码-Expected Status
健康检查时期望的HTTP状态码，肯定是200啦
### 检查间隔-Interval
健康检查的间隔时间
### 超时时间-Timeout
健康检查的超时时间
### 最大失败次数-Max Failed Times
健康检查允许的最大失败次数
### 出站接口-Interface Name
指你希望流量通过的网络接口。

在一些网络环境中，你可能有多个网络接口，比如有线网络接口和无线网络接口。当你配置代理组时，指定出站接口可以控制通过哪个接口发送流量。

比如，如果你有两个网络接口：

eth0（有线）

wlan0（无线）

你可以指定哪个接口用于某个代理组的流量。

这可以帮助你更好地管理和优化你的网络流量，确保不同的流量走不同的路径，可能是为了负载均衡或者安全性等原因
### 路由标记-Routing Mark
一个用于网络流量路由的标识符。它是一个整数，用来标记特定的网络数据包。这在高级网络配置中非常有用，因为你可以根据这个标记来进行流量控制和路由选择。通过设置路由标记，可以更灵活地管理网络流量，确保数据包通过你指定的路径传输。

举个例子，假设你有两个不同的网络路径（指的是数据在互联网上从源到目的地所经过的一系列设备和连接），分别用于不同类型的流量。你可以使用路由标记来控制这些流量。

标记 100: 用于一般的互联网流量，比如网页浏览。

标记 200: 用于视频流媒体流量。

你可以在代理组配置中将一般的互联网流量标记为100，而视频流媒体流量标记为200。然后在你的路由规则中，定义带有标记100的流量通过路径A，带有标记200的流量通过路径B。
### 过滤节点-Filter
用于筛选出符合特定条件的代理节点
```yaml
proxy-groups:
  - name: "example-group"
    type: select
    proxies:
      - "proxy1"
      - "proxy2"
      - "proxy3"
    filter:
      - "response_time < 200ms"   # 过滤响应时间小于200ms的节点
```
### 排除节点-Exclude Filter
用于排除符合特定条件的代理节点
```yaml
proxy-groups:
  - name: "example-group"
    type: select
    proxies:
      - "proxy1"
      - "proxy2"
      - "proxy3"
    exclude:
      - "region=US"               # 排除来自美国的节点
      - "ip=192.168.*.*"          # 排除特定IP地址范围内的节点
```
### 排除节点类型-Exclude Type
Direct: 直接连接，不使用任何代理。

Reject: 拒绝连接，通常用于阻止特定流量。

RejectDrop: 拒绝并丢弃连接，不返回任何信息。

Compatible: 兼容模式，通常用于处理兼容性问题。

Pass: 通过，不进行任何代理操作。

Dns: 使用DNS解析服务。

Shadowsocks: 一种加密代理，用于绕过防火墙。

ShadowsocksR: Shadowsocks的增强版，提供更多的功能和安全性。

Snell: 一种代理协议，提供强加密和高性能。

Socks5: 一种代理协议，支持各种网络应用，包括HTTP、FTP等。

Http: HTTP代理，用于HTTP/HTTPS流量代理。

Vmess: V2Ray的一种代理协议，用于穿透防火墙。

Vless: Vmess的轻量级版本，更适合高流量应用。

Trojan: 一种代理协议，模拟HTTPS流量，具有高隐蔽性。

Hysteria: 基于QUIC协议的高性能代理。

Hysteria2: Hysteria的更新版本，提供更多的功能和优化。

WireGuard: 一种现代、高效的VPN协议。

Tuic: 一种代理协议，提供强加密和高性能。

Relay: 代理之间的中继，用于代理链。

Selector: 选择器，用于选择最优代理。

Fallback: 备用代理，当主代理失效时使用。

URLTest: 测试URL，选择响应时间最快的代理。

LoadBalance: 负载均衡，将流量分散到多个代理。

Ssh: 通过SSH协议进行代理。

```yaml
proxy-groups:
  - name: "example-group"
    type: select
    proxies:
      - "proxy1"
      - "proxy2"
      - "proxy3"
    exclude:
      - "region=US"               # 排除来自美国的节点
      - "ip=192.168.*.*"          # 排除特定IP地址范围内的节点
    exclude-type: "Direct"
```
这个配置的意思是，你有一个手动选择的代理组，包含三个代理服务器，但会排除来自美国的节点和特定IP地址范围内的节点，这些排除的节点会直接连接网络而不通过代理。

```yaml
proxy-groups:
  - name: "example-group"
    type: select
    proxies:
      - "proxy1"
      - "proxy2"
      - "proxy3"
    exclude:
      - "region=US"               # 排除来自美国的节点
      - "ip=192.168.*.*"          # 排除特定IP地址范围内的节点
    exclude-type: "Socks5"
```
这段配置的意思是：

- 创建了一个手动选择的代理组，包含三个代理服务器。

- 排除来自美国的节点和特定IP地址范围内的节点。

- 这些被排除的节点将使用 Socks5 类型代理进行连接。
### 引入所有出站代理、代理集合-Include All Proxies and Providers
是否将所有出站代理和代理集合包含在代理组中
### 引入所有出站代理-Include All Proxies
是否将所有出站代理包含在代理组中
### 引入所有代理集合-Include All Provides
是否将所有代理集合包含在代理组中
### 懒惰状态-Lazy
启用懒惰状态，只在需要时才发起连接
### 禁用UDP-Disable UDP
禁用代理的UDP支持
### 隐藏代理组-Hidden
将代理组隐藏起来，不在界面上显示

## 编辑规则

### 规则类型
- Domain: 根据域名进行匹配
- GEOIP: 根据IP地理位置进行匹配
- IP-CIDR: 根据IP段进行匹配
- SrcIP-CIDR: 根据源IP进行匹配
- SrcPort: 根据源端口进行匹配
- DstPort: 根据目的端口进行匹配
- Process-Name: 根据进程名称进行匹配
- IP-ASN: 特定IP地址关联的自治系统编号，用于确定哪个自治系统控制该IP地址，ASN代表自治系统编号 (Autonomous System Number)，它是一个唯一标识符，用于标识一个自治系统。一个自治系统可以是一个组织或企业控制的网络集群，这些网络通过统一的路由策略对外交流。